# ğŸ›¡ï¸ Sistema de DetecciÃ³n de EPP con YOLO + RTSP + Telegram

Este proyecto implementa un **sistema inteligente de monitoreo de seguridad industrial**, que detecta en tiempo real si una persona estÃ¡ usando o no casco (EPP).

Utiliza:
- **YOLO (Ultralytics)** para detecciÃ³n de objetos
- **RTSP** para video en vivo desde cÃ¡mara IP
- **OpenCV** para procesamiento
- **Telegram Bot API** para alertas con foto
- Tracking persistente por ID
- LÃ³gica avanzada para asociar cascoâ€“persona

---

## ğŸ“Œ CaracterÃ­sticas principales
âœ” DetecciÃ³n de personas y cascos 
âœ” AsociaciÃ³n personaâ€“casco por distancia  
âœ” Alertas cuando alguien excede el tiempo sin casco  
âœ” EnvÃ­o de mensajes y fotos por Telegram  
âœ” ReconexiÃ³n automÃ¡tica a la cÃ¡mara  
âœ” Logging completo  
âœ” Soporte GPU (CUDA)

---

## âš™ï¸ InstalaciÃ³n

### Requisitos
Python 3.10

### Dependencias
```bash
pip install ultralytics opencv-python torch requests
```

Para GPU:
```bash
pip install torch --extra-index-url https://download.pytorch.org/whl/cu121
```

---

## ğŸš€ EjecuciÃ³n
```bash
python main.py
```

Configura antes:
- `MODEL_PATH`: runs/detect/ppe_yolo11n_180ep/weights/best.pt
- `RTSP_URL`
- Token y chat de Telegram

---

## ğŸ§  LÃ³gica del sistema

### 1. ConexiÃ³n a cÃ¡mara  
Con reconexiÃ³n automÃ¡tica.

### 2. DetecciÃ³n + tracking  
YOLO detecta personas y cascos.  
Cada persona recibe un ID Ãºnico.

### 3. AsociaciÃ³n personaâ€“casco  
Se calcula distancia entre:
```
head_center â†” casco_center
```

### 4. Alertas  
Si una persona estÃ¡ sin casco por mÃ¡s de `TIME_BEFORE_ALERT`:
- Se toma foto
- Se envÃ­a por Telegram
- Se registra en logs
- Respeta `ALERT_COOLDOWN`

---

## ğŸ–¼ï¸ Ejemplo de alerta
```
ALERTA EPP: Personal sin casco
ID: 12
Tiempo sin casco: 5s
Hora: 2025-01-01 10:32:12
Ãrea: Planta principal Bavaria Monteria picking 1
```

---

## ğŸ“ Logging
Registro en:
```
deteccion.log
```

---

## ğŸ‘¨â€ğŸ’» Autor
Cristian Herrera
